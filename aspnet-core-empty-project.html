<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Coding from an ASP.NET Core Empty Project | Ju2c0c0&#39;s blog</title>
    <meta name="description" content="A blog about everything and nothing">
    
    
    <link rel="preload" href="/assets/css/0.styles.fba42894.css" as="style"><link rel="preload" href="/assets/js/app.19971a27.js" as="script"><link rel="preload" href="/assets/js/2.7a309e13.js" as="script"><link rel="prefetch" href="/assets/js/1.655c6906.js"><link rel="prefetch" href="/assets/js/3.194a48c2.js"><link rel="prefetch" href="/assets/js/4.e66bf38f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fba42894.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Ju2c0c0's blog
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><!----></div><div class="page"><div class="content"><h1 id="coding-from-an-asp-net-core-empty-project"><a href="#coding-from-an-asp-net-core-empty-project" aria-hidden="true" class="header-anchor">#</a> Coding from an ASP.NET Core Empty Project</h1><p></p><div class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#getting-help">Getting help</a></li><li><a href="#create-an-empty-project">Create an empty project</a></li><li><a href="#build-the-project">Build the project</a></li><li><a href="#run-the-project">Run the project</a></li><li><a href="#razor-pages">Razor Pages</a></li><li><a href="#static-files">Static files</a><ul><li><a href="#setup">Setup</a></li><li><a href="#test-it-out">Test it out</a></li></ul></li><li><a href="#configuration-files">Configuration files</a></li><li><a href="#models">Models</a></li><li><a href="#database-context">Database Context</a><ul><li><a href="#create-a-database-context-class">Create a Database Context class</a></li><li><a href="#configure-the-database-context">Configure the Database Context</a></li></ul></li><li><a href="#entity-framework">Entity Framework</a></li><li><a href="#layout-directives">Layout, directives</a><ul><li><a href="#layout">Layout</a></li><li><a href="#directives">Directives</a></li><li><a href="#running-code-before-each-view">Running code before each view</a></li></ul></li><li><a href="#scaffolding">Scaffolding</a><ul><li><a href="#default-scaffolding">Default scaffolding</a></li><li><a href="#custom-scaffolding">Custom scaffolding</a></li></ul></li><li><a href="#update-a-model">Update a model</a></li><li><a href="#bugs">Bugs</a></li><li><a href="#references">References</a></li></ul></div><p></p><h2 id="introduction"><a href="#introduction" aria-hidden="true" class="header-anchor">#</a> Introduction</h2><div class="tip custom-block"><p class="custom-block-title">Information</p><p>In this post ASP.NET Core SDK 2.1 was used.</p></div><p>The SDK allows the creation of an empty ASP.NET Core project.
I thought I'd try it to build a very basic Todo web app in order to have a better understanding of how ASP.NET Core works.</p><h2 id="getting-help"><a href="#getting-help" aria-hidden="true" class="header-anchor">#</a> Getting help</h2><p><code>dotnet</code> commands come with a <code>--help</code> and <code>-h</code> switch to get information on a command.
This is a good way to know what you can and cannot do.</p><h2 id="create-an-empty-project"><a href="#create-an-empty-project" aria-hidden="true" class="header-anchor">#</a> Create an empty project</h2><p>In a terminal:</p><div class="language-powershell extra-class"><pre class="language-powershell"><code>dotnet new web
</code></pre></div><h2 id="build-the-project"><a href="#build-the-project" aria-hidden="true" class="header-anchor">#</a> Build the project</h2><p>In a terminal:</p><div class="language-powershell extra-class"><pre class="language-powershell"><code>dotnet build
</code></pre></div><h2 id="run-the-project"><a href="#run-the-project" aria-hidden="true" class="header-anchor">#</a> Run the project</h2><p>In a terminal:</p><div class="language-powershell extra-class"><pre class="language-powershell"><code>dotnet run
</code></pre></div><p>Opening <code>http://localhost:5000</code> in a browser should display a page with <code>Hello World!</code>.</p><h2 id="razor-pages"><a href="#razor-pages" aria-hidden="true" class="header-anchor">#</a> Razor Pages</h2><p>Razor Pages cannot be used directly from an empty project.</p><p>Add the following to <code>Startup.ConfigureServices</code> method (<em>Startup.cs</em> file)</p><div class="language-csharp extra-class"><pre class="language-csharp"><code>services<span class="token punctuation">.</span><span class="token function">AddMvc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then add this in the <code>Configure</code> method:</p><div class="language-csharp extra-class"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">UseMvcWithDefaultRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>By default the runtime looks for Razor Pages files in the <em>Pages</em> folder.</p><p>To test it out: create a <em>Pages</em> folder and add an <em>Index.cshtml</em> file with the following content:</p><div class="language-html extra-class"><pre class="language-html"><code>@page

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>This is a Razor Page!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Index is the default page when the URL doesn't specify one.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="static-files"><a href="#static-files" aria-hidden="true" class="header-anchor">#</a> Static files</h2><h3 id="setup"><a href="#setup" aria-hidden="true" class="header-anchor">#</a> Setup</h3><p>Static files are by default stored in the <em>wwwroot</em> folder.</p><p>To configure the middleware to enable serving of static files add the following to the <code>Startup.Configure</code> method:</p><div class="language-csharp extra-class"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">UseStaticFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="test-it-out"><a href="#test-it-out" aria-hidden="true" class="header-anchor">#</a> Test it out</h3><p>Download <a href="https://raw.githubusercontent.com/jgthms/bulma/master/css/bulma.css" target="_blank" rel="noopener noreferrer">Bulma CSS framework<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and place it in <code>~\wwwroot\css</code>.</p><p>In a page <code>header</code>, reference the CSS file:</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>~/css/bulma.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Now write some markup using Bulma classes.
The page should be styled.
Try removing the <code>app.UseStaticFiles()</code> and run the web app again.
The page should not be styled because the web host could not find the CSS file (404 error).</p><h2 id="configuration-files"><a href="#configuration-files" aria-hidden="true" class="header-anchor">#</a> Configuration files</h2><ul><li>Settings are stored in <em>appsettings.json</em>.</li><li>There can be different configuration files (e.g. <em>appsettings.Development.json</em> for a development environment).</li></ul><p>To setup configuration, add the following in <em>Startup.cs</em>:</p><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// You'll need to add this reference:</span>
<span class="token comment">// using Microsoft.Extensions.Configuration;</span>

<span class="token keyword">public</span> <span class="token class-name">IConfiguration</span> Configuration <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Exemple of <em>appsettings.Development.json</em> configuration file for a development environment containing a connection string file:</p><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;ConnectionStrings&quot;</span><span class="token operator">:</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;TodoContext&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Server=(localdb)\\mssqllocaldb;Integrated Security=true;Database=todo&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="models"><a href="#models" aria-hidden="true" class="header-anchor">#</a> Models</h2><p>If you want to scaffold models you'll need an ID property.</p><p>Exemple of a scaffoldable model:</p><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thing</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> ID <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> Description <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="database-context"><a href="#database-context" aria-hidden="true" class="header-anchor">#</a> Database Context</h2><ul><li>A database context class must inherit <code>DbContext</code>.</li><li>Usually, for one database there will be one database context.</li></ul><h3 id="create-a-database-context-class"><a href="#create-a-database-context-class" aria-hidden="true" class="header-anchor">#</a> Create a Database Context class</h3><p>In the following exemple the <code>TodoContext</code> class is used to manage <code>Things</code> to do:</p><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">using</span> JetBrains<span class="token punctuation">.</span>Annotations<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>EntityFrameworkCore<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> EmptyAspNetCore
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TodoContext</span> <span class="token punctuation">:</span> <span class="token class-name">DbContext</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token function">TodoContext</span><span class="token punctuation">(</span>DbContextOptions<span class="token operator">&lt;</span>TodoContext<span class="token operator">&gt;</span> options<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> DbSet<span class="token operator">&lt;</span>Thing<span class="token operator">&gt;</span> Things <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="configure-the-database-context"><a href="#configure-the-database-context" aria-hidden="true" class="header-anchor">#</a> Configure the Database Context</h3><p>The following exemple to add the <code>TodoContext</code> Database Context and configure it to use SQL Server.</p><p>In <code>Startup.ConfigureServices</code> method:</p><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// You'll need to add this reference:</span>
<span class="token comment">// using Microsoft.EntityFrameworkCore;</span>

services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContext</span><span class="token punctuation">&lt;</span><span class="token class-name">TodoContext</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>options <span class="token operator">=</span><span class="token operator">&gt;</span>
  options<span class="token punctuation">.</span><span class="token function">UseSqlServer</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;TodoContext&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="entity-framework"><a href="#entity-framework" aria-hidden="true" class="header-anchor">#</a> Entity Framework</h2><p>In a terminal:</p><div class="language-powershell extra-class"><pre class="language-powershell"><code>dotnet ef migrations add InitialMigration
dotnet ef database update
</code></pre></div><p>First command will add the very first migration.
Second command will apply the migration to the database configured.</p><p>If you have several database contextes, you'll need to precise for which one you want to apply migrations.</p><h2 id="layout-directives"><a href="#layout-directives" aria-hidden="true" class="header-anchor">#</a> Layout, directives</h2><h3 id="layout"><a href="#layout" aria-hidden="true" class="header-anchor">#</a> Layout</h3><ul><li>Usually named <code>_Layout.cshtml</code></li><li>If a relative name is given, the Razor view engine search in the controller-associated folder, then in the <code>Shared</code> folder.</li></ul><p>Exemple of layout:</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Welcome page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>~/css/bulma.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Things todo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>subtitle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>So much things to be done, so little time...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      @RenderBody()
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>@RenderBody()</code> will render the view of the page that is using the layout.</p><h3 id="directives"><a href="#directives" aria-hidden="true" class="header-anchor">#</a> Directives</h3><ul><li>Used to import shared Razor directives, such as namespace and tag helpers.</li><li>Named <code>_ViewImports.cshtml</code>.</li><li>Can be placed in any folder. <code>_ViewImports</code> files are processed starting from the root folder,
i.e. you can override the root <code>_ViewImports</code> at the folder level.</li></ul><p>This is important because usually you want the ASP tags to be available on all your Razor Pages and you don't want to write the full namespace each time.</p><p>Exemple:</p><div class="language-html extra-class"><pre class="language-html"><code>@namespace EmptyAspNetCore
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
</code></pre></div><h3 id="running-code-before-each-view"><a href="#running-code-before-each-view" aria-hidden="true" class="header-anchor">#</a> Running code before each view</h3><ul><li>Usually named <code>_ViewStart.cshtml</code>.</li><li>Used to run code before each view.</li><li>Typically used to define the layout of each view.</li><li>Just Like <code>ViewImports</code>, <code>ViewStart</code> is processed starting from the root folder</li></ul><div class="language-html extra-class"><pre class="language-html"><code>@{
  Layout = &quot;_Layout&quot;;
}
</code></pre></div><h2 id="scaffolding"><a href="#scaffolding" aria-hidden="true" class="header-anchor">#</a> Scaffolding</h2><h3 id="default-scaffolding"><a href="#default-scaffolding" aria-hidden="true" class="header-anchor">#</a> Default scaffolding</h3><p>To scaffold controllers and views from a model, first install <code>dotnet-aspnet-codegenerator</code> tool using the following command in a terminal:</p><div class="language-powershell extra-class"><pre class="language-powershell"><code>dotnet tool install <span class="token operator">--</span>global dotnet<span class="token operator">-</span>aspnet<span class="token operator">-</span>codegenerator <span class="token operator">-</span>version 2<span class="token punctuation">.</span>1<span class="token punctuation">.</span>1
</code></pre></div><p>Then to scaffold the <code>Thing</code> model:</p><div class="language-powershell extra-class"><pre class="language-powershell"><code>dotnet<span class="token operator">-</span>aspnet<span class="token operator">-</span>codegenerator razorpage <span class="token operator">-</span>m Thing <span class="token operator">-</span>dc TodoContext <span class="token operator">-</span>outDir Pages <span class="token operator">-</span>udl <span class="token operator">-</span>f
</code></pre></div><p>Description of the options passed:</p><ul><li><code>-m</code> : model to use</li><li><code>-dc</code> : Database Context to use</li><li><code>-outDir</code> : folder where the views and controllers will be generated. If omitted, they will be generated at the root folder of the project.</li><li><code>-udl</code> : use default layout. If this option and <code>-l</code> (layout) options are omitted, the generator will set the layout to null for each view generated.</li><li><code>-f</code> : overwrite files (useful for playing purposes)</li></ul><h3 id="custom-scaffolding"><a href="#custom-scaffolding" aria-hidden="true" class="header-anchor">#</a> Custom scaffolding</h3><p>The default scaffold templates were made for Bootstrap.
If you want to scaffold using your own custom template:</p><p>First copy the following <code>Templates</code> folder in your project folder:
<code>C:\Program Files\dotnet\sdk\NuGetFallbackFolder\microsoft.visualstudio.web.codegenerators.mvc\&lt;version&gt;\Templates</code></p><p>Then in the <code>.csproj</code> file exclude the copied folder from the project by adding the following <code>DefaultItemExcludes</code> element in the <code>PropertyGroup</code> node. We need to do this or <code>dotnet</code> will try to process them.</p><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DefaultItemExcludes</span><span class="token punctuation">&gt;</span></span>$(DefaultItemExcludes)Templates\**<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DefaultItemExcludes</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Now you can edit the templates in the <code>RazorPageGenerator</code> for Razor Pages and scaffold using
<code>dotnet-aspcore-codegenerator</code>. The tool will use the templates  in the project.</p><h2 id="update-a-model"><a href="#update-a-model" aria-hidden="true" class="header-anchor">#</a> Update a model</h2><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>SQLite does not supports some operations (e.g. adding a foreign key) so you may end up with errors when using Entity Framework. The best thing to do to play with EF migrations is to use another SQL engine such as LocalDB.</p></div><p>Three steps (eventually four):</p><ol><li>Update the model.</li><li>Add a new migration.</li><li>Update the database (apply the migration)</li><li>Eventually re-scaffold the model.</li></ol><p>First, update your model. For exemple, add a new property.</p><p>Then in a terminal add a new migration:</p><div class="language-powershell extra-class"><pre class="language-powershell"><code>dotnet ef migrations add AddPropToModel
</code></pre></div><p>Now update the database to the latest migration:</p><div class="language-powershell extra-class"><pre class="language-powershell"><code>dotnet ef database update
</code></pre></div><p>You can re-scaffold your model to reflect the changes to the model on your views.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Be careful though, if you have made changes to the scaffolded files you will lose your changes!</p></div><div class="language-powershell extra-class"><pre class="language-powershell"><code>dotnet<span class="token operator">-</span>aspnet<span class="token operator">-</span>codegenerator razorpage <span class="token operator">-</span>m Thing <span class="token operator">-</span>dc TodoContext <span class="token operator">-</span>outDir Pages <span class="token operator">-</span>udl <span class="token operator">-</span>f
</code></pre></div><h2 id="bugs"><a href="#bugs" aria-hidden="true" class="header-anchor">#</a> Bugs</h2><p>At the time of writing this article, there is a bug if you try to scaffold a model that has a boolean property. See this post on SO which also have a workaround: <a href="https://stackoverflow.com/questions/46349821/asp-net-core-and-scaffold?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa" target="_blank" rel="noopener noreferrer">Asp.Net Core and Scaffold<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h2 id="references"><a href="#references" aria-hidden="true" class="header-anchor">#</a> References</h2><ul><li><a href="https://docs.microsoft.com/en-us/aspnet/core/?view=aspnetcore-2.1" target="_blank" rel="noopener noreferrer">MS Docs: Introduction to ASP.NET Core<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://docs.microsoft.com/en-us/ef/core/providers/sqlite/limitations" target="_blank" rel="noopener noreferrer">MS Docs: SQLite EF Core Database Provider Limitations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://stackoverflow.com/questions/35797628/ef7-generates-wrong-migrations-with-sqlite" target="_blank" rel="noopener noreferrer">SO: EF7 generates wrong migrations with SQLite<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://stackoverflow.com/questions/51022196/visual-studio-2017-asp-net-core-2-scaffolding-templates" target="_blank" rel="noopener noreferrer">SO: Visual Studio 2017 ASP NET Core 2 Scaffolding Templates<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://stackoverflow.com/questions/43173811/how-do-i-exclude-files-folders-from-a-net-core-standard-project" target="_blank" rel="noopener noreferrer">SO: How do I exclude files/folders from a .NET Core/Standard project?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="page-edit"><!----><!----></div><!----></div></div></div>
    <script src="/assets/js/2.7a309e13.js" defer></script><script src="/assets/js/app.19971a27.js" defer></script>
  </body>
</html>
